(function(e){function t(t){for(var o,a,s=t[0],l=t[1],c=t[2],u=0,d=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);p&&p(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(o=!1)}o&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},i={app:0},r=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var p=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"1cfe":function(e,t,n){"use strict";n("4dab")},"4dab":function(e,t,n){},"694b":function(e,t,n){"use strict";n("89f2")},"80f8":function(e,t,n){},"89f2":function(e,t,n){},"8ccb":function(e,t,n){"use strict";n("80f8")},"9d30":function(e,t,n){},b1dd:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function i(e,t){var n=Object(o["O"])("router-view");return Object(o["F"])(),Object(o["j"])(n)}n("694b");const r={};r.render=i;var a=r,s=n("6c02"),l=Object(o["hb"])("data-v-2b3dbab2");Object(o["I"])("data-v-2b3dbab2");var c={class:"game-online"};Object(o["G"])();var p=l((function(e,t,n,i,r,a){var s=Object(o["O"])("PixelShowPanel");return Object(o["F"])(),Object(o["j"])("div",c,[Object(o["n"])(s,{pixels:e.pixelArr,onHandleStop:e.handleStop,onHandleRestart:e.handleStart},null,8,["pixels","onHandleStop","onHandleRestart"])])})),u=n("5530"),d=Object(o["hb"])("data-v-43fdb2ba");Object(o["I"])("data-v-43fdb2ba");var f={class:"pixel-show-panel"},h={class:"surface pixel-show-panel-surface",style:{"margin-top":"16px"}},v={class:"btn-box"},y=Object(o["n"])("div",{id:"matterShowPanel"},[Object(o["n"])("canvas",{id:"showPanel",class:"matter-canvas"})],-1);Object(o["G"])();var m=d((function(e,t,n,i,r,a){return Object(o["F"])(),Object(o["j"])("div",f,[Object(o["n"])("div",h,[(Object(o["F"])(!0),Object(o["j"])(o["b"],null,Object(o["M"])(e.pixels,(function(e,t){return Object(o["F"])(),Object(o["j"])("div",{key:t,class:"pixel-item",style:{"background-color":e}},null,4)})),128))]),Object(o["n"])("div",v,[Object(o["n"])("span",{class:"icon-btn text",onClick:t[1]||(t[1]=function(){return e.handleRestart&&e.handleRestart.apply(e,arguments)})},"start"),Object(o["n"])("span",{class:"icon-btn text",style:{"margin-left":"20px"},onClick:t[2]||(t[2]=function(){return e.handleStop&&e.handleStop.apply(e,arguments)})},"pause")]),y])})),b=(n("a9e3"),n("d3b7"),n("25f0"),16),g=n("5502"),w=(n("a4d3"),n("e01a"),n("84a2")),S=n.n(w),k=Symbol("key"),j=S()((function(e){var t;null===(t=window.parent)||void 0===t||t.postMessage({msg:"draw",data:e},"*")}),50),O=Object(g["a"])({state:{canvasWidth:16,canvasHeight:16,pixels:Object(o["u"])(new Array(256))},mutations:{commitPixels:function(e,t){e.pixels=t},commitCanvasSize:function(e,t){e.canvasWidth=t[0],e.canvasHeight=t[1],e.pixels=Object(o["u"])(new Array(t[0]*t[1]))}},actions:{updatePixels:function(e,t){var n=e.commit;n("commitPixels",t),j(t)}},modules:{}}),x=O;var P=Object(o["o"])({name:"PixelShowPanel",props:{unit:{type:Number,default:b}},emits:["handleRestart","handleStop"],setup:function(e,t){var n=t.emit,i=Object(g["b"])(k),r=i.state.canvasWidth;document.body.style.setProperty("--unit",r.toString()||e.unit.toString());var a=Object(o["J"])({});Object(o["bb"])((function(){return i.state.canvasWidth}),(function(t,n){var o=i.state.canvasWidth;console.log(t,"currentValue!"),document.body.style.setProperty("--unit",o.toString()||e.unit.toString())}));var s=Object(o["h"])((function(){return i.state.pixels}));function l(){n("handleRestart")}function c(){n("handleStop")}return Object(u["a"])({handleRestart:l,handleStop:c,pixels:s},Object(o["V"])(a))}});n("1cfe"),n("d0be");P.render=m,P.__scopeId="data-v-43fdb2ba";var z=P,C=n("2909"),A=(n("159b"),n("b8bf")),G=A["Events"],H=A["Engine"],M=A["Render"],T=(A["Runner"],A["Bodies"]),E=A["Composite"],B=A["Body"],_=H.create();function D(e){if(_.gravity.y=5,G.on(_,"collisionStart",(function(e){for(var t=e.pairs,n=0;n<t.length;n++){var o=t[n];("bird"===o.bodyA.label&&"wall"===o.bodyB.label||"bird"===o.bodyB.label&&"wall"===o.bodyA.label)&&(console.log("碰撞!",t),alert("game over"))}})),e){var t=document.getElementById("showPanel"),n=M.create({canvas:t,element:document.getElementById("matterShowPanel")||void 0,engine:_,options:{width:800,height:800}});M.run(n)}}function L(){H.update(_,1e3/60)}n("4de4"),n("7db0"),n("b0c0");var I,R=window;R.LiteGraph;(function(e){e["input"]="input",e["output"]="output"})(I||(I={}));var F=50,N=16;function q(e){e.leaves&&e.leaves.length&&W.apply(this,[e.leaves]),V.apply(this,[e])}function W(e){for(var t=0;t<e.length;t++){var n=e[t];n.type===I.input?this.addInput(n.name,n.action):n.type===I.output&&this.addOutput(n.name,n.action)}}function V(e){this.properties=Object.assign({color:"#000",pos:[1,1],canBroken:!1,canDestroy:!1,withGravity:!1},e.properties),this.size=[40,40],this.title=e.title}var J="object/bird",U="object/plane",K="object/fire",Q="object/wall",X="events/screenClick",Y="events/controlClick",Z="events/buttonClick",$=n("1e5c"),ee=window,te=ee.LiteGraph,ne="/game/music/",oe={A4:new $["Howl"]({src:[ne+"A4.MP3"]}),B4:new $["Howl"]({src:[ne+"B4.MP3"]}),C4:new $["Howl"]({src:[ne+"C4.MP3"]}),D4:new $["Howl"]({src:[ne+"D4.MP3"]}),E4:new $["Howl"]({src:[ne+"E4.MP3"]}),F4:new $["Howl"]({src:[ne+"F4.MP3"]}),G4:new $["Howl"]({src:[ne+"G4.MP3"]}),sharpA4:new $["Howl"]({src:[ne+"sharpA4.MP3"]}),sharpC4:new $["Howl"]({src:[ne+"sharpC4.MP3"]}),sharpD4:new $["Howl"]({src:[ne+"sharpD4.MP3"]}),sharpF4:new $["Howl"]({src:[ne+"sharpF4.MP3"]}),sharpG4:new $["Howl"]({src:[ne+"sharpG4.MP3"]})};function ie(e){oe[e].play()}function re(e){function t(){this.addInput(e.title,te.ACTION),this.addInput(e.title,te.ACTION),this.addInput(e.title,te.ACTION),this.addInput(e.title,te.ACTION),this.properties={pos:[4,1],canShow:!1,minSize:[40,40]},this.size=[80,80],this.bgcolor="#ffaf49"}t.title="music_"+e.name,t.prototype.onAction=function(t,n){ie(e.name)},te.registerNodeType("object/music_"+e.name,t)}var ae,se=window,le=se.LiteGraph;(function(e){e["jump"]="跳跃"})(ae||(ae={}));var ce={title:"小鸟",nodeType:J,properties:{canShow:!0,withGravity:!0,canBroken:!0,color:"#f44336",minSize:[1,1]},leaves:[{type:"input",name:ae.jump,action:le.ACTION}]};function pe(){function e(){q.apply(this,[ce])}e.prototype.onAction=function(e,t){e===ae.jump&&(A["Body"].setStatic(this.properties.body,!1),A["Body"].setVelocity(this.properties.body,{x:0,y:-.6*F}),this.properties.withGravity=!0)},le.registerNodeType(ce.nodeType,e)}var ue=window,de=ue.LiteGraph,fe={title:"墙壁",nodeType:Q,properties:{canShow:!0,canBroken:!0,canDestroy:!0,color:"#f44336",minSize:[1,1]}};function he(){function e(){q.apply(this,[fe]),this.size=[80,80]}de.registerNodeType(fe.nodeType,e)}var ve,ye=window,me=ye.LiteGraph;(function(e){e["move"]="自由移动",e["head"]="头部插口"})(ve||(ve={}));var be={title:"战斗机",nodeType:U,properties:{canShow:!0,withGravity:!1,canBroken:!0,color:"#f44336",minSize:[3,3],image:[[1,1,0],[0,1,1],[1,1,0]]},leaves:[{type:"input",name:ve.move,action:me.ACTION},{type:"output",name:ve.head,action:"string"}]},ge=16;function we(){function e(){q.apply(this,[be]),this.size=[120,120]}e.prototype.onAction=function(e,t){if(console.log(e,t),e===ve.move)switch(A["Body"].setStatic(this.properties.body,!1),t){case"left":this.properties.pos[0]=Math.max(0,this.properties.pos[0]-F);break;case"right":this.properties.pos[0]=Math.min((ge-1)*F,this.properties.pos[0]+F);break;case"up":this.properties.pos[1]=Math.max(0,this.properties.pos[1]-F);break;case"down":this.properties.pos[1]=Math.min((ge-1)*F,this.properties.pos[1]+F);break}},me.registerNodeType(be.nodeType,e)}var Se=be.properties.image||[];function ke(e,t){for(var n=0;n<Se.length;n++)for(var o=Se[n],i=0;i<o.length;i++)o[i]&&(t[(e.renderPos[1]+n)*ge+e.renderPos[0]+i]=be.properties.color)}var je,Oe=window,xe=Oe.LiteGraph;(function(e){e["fix"]="固定",e["fire"]="发射"})(je||(je={}));var Pe={title:"发射器",nodeType:K,properties:{canShow:!1,withGravity:!1,color:"#f44336",minSize:[1,1]},leaves:[{type:"input",name:je.fix,action:"string"},{type:"input",name:je.fire,action:xe.ACTION}]};function ze(){function e(){q.apply(this,[Pe]),this.size=[40,40]}e.prototype.onConnectionsChange=function(e,t,n,o,i){0===t&&(n?(console.log("onConnectionsChange",e,t,o,i),console.log(qe._nodes,o.origin_id),this.properties.followId=o.origin_id):this.properties.followId=null)},e.prototype.onAction=function(e,t){if(e===je.fire)switch(Xe(this),t){case"fire":break}},xe.registerNodeType(Pe.nodeType,e)}Pe.properties.image;var Ce=n("de79"),Ae=window,Ge=Ae.LiteGraph,He={title:"屏幕点击",nodeType:X,properties:{color:"#f44336"},leaves:[{type:"output",name:"屏幕点击",action:Ge.EVENT}]};function Me(){function e(){q.apply(this,[He]),this.size=[120,40]}var t=new Ce["Event"];function n(e){e||window.event;t.emit("click")}function o(e){this.triggerSlot(0,e)}e.prototype.onAdded=function(){var e=document.querySelector(".pixel-show-panel-surface");null===e||void 0===e||e.addEventListener("click",n)},e.prototype.onRemoved=function(){var e=document.querySelector(".pixel-show-panel-surface");null===e||void 0===e||e.removeEventListener("click",n)},e.prototype.onConnectionsChange=function(e,n,i,r,a){i?t.on(o.bind(this)):t.off(o.bind(this))},Ge.registerNodeType(He.nodeType,e)}n("a630"),n("3ca3");var Te=window,Ee=Te.LiteGraph,Be={title:"方向控制",nodeType:Y,properties:{color:"#ffffff22",domRequire:!0},leaves:[{type:"output",name:"方向控制盘",action:Ee.EVENT}]};function _e(){function e(){q.apply(this,[Be]),this.size=[360,360],this.canShow=!1}var t=new Ce["Event"];function n(e){var n=Array.from(document.querySelectorAll(".pixel-show-panel-surface .pixel-item")||[]),o=e||window.event;if(o.target.classList.contains("pixel-item")){var i=null===n||void 0===n?void 0:n.indexOf(o.target),r=Math.floor(i/N),a=i%N;console.log(a,r,999),t.emit([a,r])}}function o(e){console.log("方向盘点击");var t=this.renderPos[0],n=this.renderPos[1];e[0]<t+6&&e[0]>=t+3&&e[1]>=n&&e[1]<n+3&&(this.triggerSlot(0,"up"),this.triggerSlot(1,"fire")),e[0]<t+3&&e[0]>=t&&e[1]>=n+3&&e[1]<n+6&&(this.triggerSlot(0,"left"),this.triggerSlot(1,"fire")),e[0]<t+9&&e[0]>=t+6&&e[1]>=n+3&&e[1]<n+6&&(this.triggerSlot(0,"right"),this.triggerSlot(1,"fire")),e[0]<t+6&&e[0]>=t+3&&e[1]>=n+6&&e[1]<n+9&&(this.triggerSlot(0,"down"),this.triggerSlot(1,"fire"))}e.prototype.onDrag=function(e){var t=$e(Ze(e));console.log("node 移动到",t),this.renderPos=t},e.prototype.initClickHandler=function(){console.log("initClickHandler");var e=document.querySelector(".pixel-show-panel-surface");null===e||void 0===e||e.removeEventListener("click",n),null===e||void 0===e||e.addEventListener("click",n),this.properties.domRequire=!1},e.prototype.onConnectionsChange=function(e,n,i,r,a){var s=o.bind(this);t.offAll(),i?t.on(s):t.off(s)},Ee.registerNodeType(Be.nodeType,e)}var De=window,Le=De.LiteGraph,Ie={title:"自定义按钮",nodeType:Z,properties:{canShow:!0,color:"#ffaf49",domRequire:!0,minSize:[1,1]},leaves:[{type:"output",name:"点击",action:Le.EVENT}]};function Re(){function e(){q.apply(this,[Ie]),this.size=[80,80],this.renderSize=[2,2];var e=new Ce["Event"];this.EvtHandler=e,this.clickHandler=function(t){console.log("点击了！");var n=Array.from(document.querySelectorAll(".pixel-show-panel-surface .pixel-item")||[]),o=t||window.event;if(console.log(o.target,o.target.classList.contains("pixel-item")),o.target.classList.contains("pixel-item")){var i=null===n||void 0===n?void 0:n.indexOf(o.target),r=Math.floor(i/N),a=i%N;e.emit([a,r])}}}function t(e){console.log("触发点击前",this.renderPos,this.renderSize);var t=this.renderPos[0],n=this.renderPos[1];e[0]<t+this.renderSize[0]&&e[0]>=t&&e[1]>=n&&e[1]<n+this.renderSize[1]&&(console.log("触发点击"),this.triggerSlot(0,"click"))}e.prototype.onDrag=function(e){var t=$e(Ze(e));console.log("node 移动到",t),this.renderPos=t},e.prototype.onResize=function(e){var t=tt(e);console.log("renderSize",t),this.renderSize=t},e.prototype.initClickHandler=function(){console.log("initClickHandler");var e=document.querySelector(".pixel-show-panel-surface");null===e||void 0===e||e.removeEventListener("click",this.clickHandler),null===e||void 0===e||e.addEventListener("click",this.clickHandler),this.properties.domRequire=!1},e.prototype.onConnectionsChange=function(e,n,o,i,r){var a=t.bind(this);this.EvtHandler.offAll(),o?this.EvtHandler.on(a):this.EvtHandler.off(a)},Le.registerNodeType(Ie.nodeType,e)}var Fe=window,Ne=Fe.LGraph,qe=(Fe.LGraphCanvas,Fe.LiteGraph,Object(o["u"])(new Ne));qe.canvasHeight=16,qe.canvasWidth=16;Object(o["u"])({});function We(){pe(),he(),we(),ze(),Me(),_e(),Re(),re({name:"A4",title:"A4"}),re({name:"B4",title:"B4"}),re({name:"C4",title:"C4"}),re({name:"D4",title:"D4"}),re({name:"E4",title:"E4"}),re({name:"F4",title:"F4"}),re({name:"G4",title:"G4"}),re({name:"sharpA4",title:"sharpA4"}),re({name:"sharpC4",title:"sharpC4"}),re({name:"sharpD4",title:"sharpD4"}),re({name:"sharpF4",title:"sharpF4"}),re({name:"sharpG4",title:"sharpG4"});var e='{"last_node_id":14,"last_link_id":7,"nodes":[{"id":1,"type":"object/music_A4","pos":[40,360],"size":[80,80],"flags":{},"order":10,"mode":0,"inputs":[{"name":"A4","type":-1,"link":3},{"name":"A4","type":-1,"link":null},{"name":"A4","type":-1,"link":null},{"name":"A4","type":-1,"link":null}],"properties":{"pos":[4,1],"canShow":false,"minSize":[40,40]},"bgcolor":"#ffaf49"},{"id":2,"type":"object/music_B4","pos":[120,360],"size":[80,80],"flags":{},"order":9,"mode":0,"inputs":[{"name":"B4","type":-1,"link":4},{"name":"B4","type":-1,"link":null},{"name":"B4","type":-1,"link":null},{"name":"B4","type":-1,"link":null}],"properties":{"pos":[4,1],"canShow":false,"minSize":[40,40]},"bgcolor":"#ffaf49"},{"id":3,"type":"object/music_C4","pos":[200,360],"size":[80,80],"flags":{},"order":7,"mode":0,"inputs":[{"name":"C4","type":-1,"link":null},{"name":"C4","type":-1,"link":1},{"name":"C4","type":-1,"link":null},{"name":"C4","type":-1,"link":null}],"properties":{"pos":[4,1],"canShow":false,"minSize":[40,40]},"bgcolor":"#ffaf49"},{"id":4,"type":"object/music_D4","pos":[280,360],"size":[80,80],"flags":{},"order":8,"mode":0,"inputs":[{"name":"D4","type":-1,"link":2},{"name":"D4","type":-1,"link":null},{"name":"D4","type":-1,"link":null},{"name":"D4","type":-1,"link":null}],"properties":{"pos":[4,1],"canShow":false,"minSize":[40,40]},"bgcolor":"#ffaf49"},{"id":5,"type":"object/music_F4","pos":[440,360],"size":[80,80],"flags":{},"order":12,"mode":0,"inputs":[{"name":"F4","type":-1,"link":6},{"name":"F4","type":-1,"link":null},{"name":"F4","type":-1,"link":null},{"name":"F4","type":-1,"link":null}],"properties":{"pos":[4,1],"canShow":false,"minSize":[40,40]},"bgcolor":"#ffaf49"},{"id":6,"type":"object/music_E4","pos":[360,360],"size":[80,80],"flags":{},"order":11,"mode":0,"inputs":[{"name":"E4","type":-1,"link":5},{"name":"E4","type":-1,"link":null},{"name":"E4","type":-1,"link":null},{"name":"E4","type":-1,"link":null}],"properties":{"pos":[4,1],"canShow":false,"minSize":[40,40]},"bgcolor":"#ffaf49"},{"id":7,"type":"object/music_G4","pos":[520,360],"size":[80,80],"flags":{},"order":13,"mode":0,"inputs":[{"name":"G4","type":-1,"link":7},{"name":"G4","type":-1,"link":null},{"name":"G4","type":-1,"link":null},{"name":"G4","type":-1,"link":null}],"properties":{"pos":[4,1],"canShow":false,"minSize":[40,40]},"bgcolor":"#ffaf49"},{"id":8,"type":"events/buttonClick","pos":[40,160],"size":[80,80],"flags":{},"order":0,"mode":0,"outputs":[{"name":"点击","type":-1,"links":[1]}],"title":"自定义按钮","properties":{"color":"#9c27b0","pos":[1,1],"canBroken":false,"canDestroy":false,"withGravity":false,"canShow":true,"domRequire":true,"minSize":[1,1]}},{"id":9,"type":"events/buttonClick","pos":[120,160],"size":[80,80],"flags":{},"order":1,"mode":0,"outputs":[{"name":"点击","type":-1,"links":[2]}],"title":"自定义按钮","properties":{"color":"#3f51b5","pos":[1,1],"canBroken":false,"canDestroy":false,"withGravity":false,"canShow":true,"domRequire":true,"minSize":[1,1]}},{"id":12,"type":"events/buttonClick","pos":[200,160],"size":[80,80],"flags":{},"order":4,"mode":0,"outputs":[{"name":"点击","type":-1,"links":[5]}],"title":"自定义按钮","properties":{"color":"#03a9f4","pos":[1,1],"canBroken":false,"canDestroy":false,"withGravity":false,"canShow":true,"domRequire":true,"minSize":[1,1]}},{"id":13,"type":"events/buttonClick","pos":[280,160],"size":[80,80],"flags":{},"order":5,"mode":0,"outputs":[{"name":"点击","type":-1,"links":[6]}],"title":"自定义按钮","properties":{"color":"#009688","pos":[1,1],"canBroken":false,"canDestroy":false,"withGravity":false,"canShow":true,"domRequire":true,"minSize":[1,1]}},{"id":14,"type":"events/buttonClick","pos":[360,160],"size":[80,80],"flags":{},"order":6,"mode":0,"outputs":[{"name":"点击","type":-1,"links":[7]}],"title":"自定义按钮","properties":{"color":"#8bc34a","pos":[1,1],"canBroken":false,"canDestroy":false,"withGravity":false,"canShow":true,"domRequire":true,"minSize":[1,1]}},{"id":10,"type":"events/buttonClick","pos":[440,160],"size":[80,80],"flags":{},"order":3,"mode":0,"outputs":[{"name":"点击","type":-1,"links":[3]}],"title":"自定义按钮","properties":{"color":"#ffeb3b","pos":[1,1],"canBroken":false,"canDestroy":false,"withGravity":false,"canShow":true,"domRequire":true,"minSize":[1,1]}},{"id":11,"type":"events/buttonClick","pos":[520,160],"size":[80,80],"flags":{},"order":2,"mode":0,"outputs":[{"name":"点击","type":-1,"links":[4]}],"title":"自定义按钮","properties":{"color":"#ff9800","pos":[1,1],"canBroken":false,"canDestroy":false,"withGravity":false,"canShow":true,"domRequire":true,"minSize":[1,1]}}],"links":[[1,8,0,3,1,-1],[2,9,0,4,0,-1],[3,10,0,1,0,-1],[4,11,0,2,0,-1],[5,12,0,6,0,-1],[6,13,0,5,0,-1],[7,14,0,7,0,-1]],"groups":[],"config":{},"extra":{},"version":0.4}',t=window.gameJson||e;qe.configure(JSON.parse(t)),console.log("carry")}function Ve(){return qe._nodes.filter((function(e){var t;return null===(t=e.properties)||void 0===t?void 0:t.canShow}))}function Je(){return qe._nodes.filter((function(e){var t;return!(null!==(t=e.properties)&&void 0!==t&&t.canShow)}))}function Ue(e){var t=Ze(e.pos);e.enginePos=t,e.properties.pos=Object(C["a"])(t),e.renderPos=$e(t),e.renderSize=tt(e.size)}function Ke(e,t){e.enginePos=t,e.properties.pos=Object(C["a"])(t),e.renderPos=$e(t)}function Qe(e,t){var n,o=(null===(n=e.properties)||void 0===n?void 0:n.color)||"#000";if(e.properties.image)ke(e,t);else if(e.renderSize)for(var i=e.renderSize,r=0;r<i[1];r++)for(var a=0;a<i[0];a++)t[(e.renderPos[1]+r)*qe.canvasWidth+e.renderPos[0]+a]=o}function Xe(e){var t=e.pos;if(e.properties.followId){var n=qe._nodes.find((function(t){return t.id===e.properties.followId}));n&&(console.log("命中"),t=[n.enginePos[0]+2*F,n.enginePos[1]+F])}var o=et([40,40]),i=Ze(t),r=T.rectangle(i[0]+Math.round(o[0]/2),i[1]+Math.round(o[1]/2),o[0],o[1],{label:"fire",frictionAir:.01});A["Body"].setStatic(r,!1);var a=_.gravity;A["Body"].applyForce(r,r.position,{x:-a.x*a.scale*r.mass,y:-a.y*a.scale*r.mass}),A["Body"].setVelocity(r,{x:20,y:0}),e.properties.body=e.properties.body||[],e.properties.body.push(r),E.add(_.world,r)}function Ye(e){var t=et(e.size),n={};switch(e.nodeType){case J:n={label:J,frictionAir:.01};break;case Q:n={isStatic:!0,label:Q};break}e.properties.body=T.rectangle(e.enginePos[0]+Math.round(t[0]/2),e.enginePos[1]+Math.round(t[1]/2),t[0],t[1],n),E.add(_.world,[e.properties.body])}function Ze(e){return[Math.round((e[0]-40)/40)*F,Math.round((e[1]-40)/40)*F]}function $e(e){return[Math.floor(e[0]/F),Math.min((null===qe||void 0===qe?void 0:qe.canvasHeight)-1||15,Math.floor(e[1]/F))]}function et(e){return[Math.round(e[0]/40)*F,Math.round(e[1]/40)*F]}function tt(e){return[Math.round(e[0]/40),Math.round(e[1]/40)]}var nt=window,ot=nt.LGraph;nt.LGraphCanvas,nt.LiteGraph;function it(){qe.stop(),setTimeout((function(){var e=Ve();E.clear(_.world,!1);var t=T.rectangle(400,850,800,100,{isStatic:!0});E.add(_.world,[t]),e.forEach((function(e){Ue(e),Ye(e)})),qe.start()}),100)}function rt(){var e=Je();e.forEach((function(e){e.initClickHandler&&e.initClickHandler()}));var t=Ve();t.forEach((function(e){e.initClickHandler&&e.initClickHandler()}))}function at(){qe.stop()}function st(e){var t=e.canvasWidth,n=e.canvasHeight,o=e.onAfterStepHandler;D(),We();var i=n*F,r=t*n;qe.onAfterStep=function(e){if(qe.status!==ot.STATUS_STOPPED){L();var n=new Array(r),a=E.allBodies(_.world);a.forEach((function(e){if("fire"===e.label){var o=_.gravity;B.applyForce(e,e.position,{x:-o.x*o.scale*e.mass,y:-o.y*o.scale*e.mass});var i=$e([e.position.x,e.position.y]);i[0]<t?n[i[1]*qe.canvasWidth+i[0]]="#000":E.remove(_.world,e)}}));var s=Ve();s.forEach((function(e){var t,o=Object(C["a"])(e.properties.pos);null!==(t=e.properties)&&void 0!==t&&t.withGravity&&(o[1]=Math.min(i,Math.floor(e.properties.body.position.y))),Ke(e,o),Qe(e,n)})),o(n)}}}var lt=Object(o["o"])({name:"GameOnline",components:{PixelShowPanel:z},setup:function(){var e=16,t=Object(o["J"])({pixelArr:new Array(e*e)}),n=Object(g["b"])(k);return Object(o["C"])((function(){st({canvasWidth:n.state.canvasWidth,canvasHeight:n.state.canvasHeight,onAfterStepHandler:function(e){n.dispatch("updatePixels",e)}}),rt()})),Object(u["a"])({handleStart:it,handleStop:at},Object(o["V"])(t))}});n("8ccb");lt.render=p,lt.__scopeId="data-v-2b3dbab2";var ct=lt,pt=[{path:"/",name:"Game",component:ct}],ut=Object(s["a"])({history:Object(s["b"])(""),routes:pt}),dt=n("3fd4");n("7dd6"),n("9d30");function ft(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container;Object(o["i"])(a).use(x,k).use(ut).use(dt["a"]).mount(t&&t.querySelector("#app")||"#app")}ft()},d0be:function(e,t,n){"use strict";n("b1dd")}});